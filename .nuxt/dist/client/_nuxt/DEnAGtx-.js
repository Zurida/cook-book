import{n as k,o,c as i,t as f,r as v,a as e,F as $,s as C,J as u,z as y,q as p,w as I,K as B,E as D,D as b,b as F,d as N}from"./Bdy9WIX3.js";import{_ as g}from"./DlAUqK2U.js";import{_ as S}from"./C1dx7Lj9.js";import{_ as V}from"./B7Dhv65G.js";import{_ as z}from"./C2Ei7JBT.js";import{u as T}from"./vsY5hp9Z.js";import"./BurPQFkw.js";const E=k({__name:"CollapseItem",props:{item:{}},emits:["click"],setup(d,{emit:t}){const a=t;return(l,c)=>(o(),i("li",{onClick:c[0]||(c[0]=n=>a("click"))},f(l.item.name),1))}}),L=g(E,[["__scopeId","data-v-5c21150d"]]),R={class:"collapse"},q={class:"collapse__title"},G={class:"collapse__dropdown"},J={class:"collapse__list"},K=k({__name:"Collapse",props:{category:{}},emits:["click"],setup(d,{emit:t}){let a=v(0);const l=t;function c(n){a.value=n}return(n,m)=>{const h=L;return o(),i("div",R,[e("div",{class:"collapse__heading",onClick:m[0]||(m[0]=r=>l("click"))},[e("div",q,f(n.category.text),1)]),e("div",G,[e("ul",J,[(o(!0),i($,null,C(n.category.subcategories,r=>(o(),u(h,{item:r,class:y({"is-active":r.id===p(a)}),onClick:s=>c(r.id)},null,8,["item","class","onClick"]))),256))])])])}}}),P=g(K,[["__scopeId","data-v-37e034ef"]]),U=d=>{const t=new Date(d);return new Intl.DateTimeFormat("ru-RU",{dateStyle:"long"}).format(t)},X={class:"card__description"},Y={class:"card__date"},j=["title"],H={class:"card__tags"},M=k({__name:"Card",props:{card:{},to:{}},setup(d){return(t,a)=>{const l=V,c=z;return o(),u(c,{to:t.to,class:"card"},{default:I(()=>[e("div",{class:"card__image",style:B({backgroundImage:t.card.img?`url(${t.card.img})`:"none"})},null,4),e("div",X,[e("div",Y,"Добавлено: "+f(p(U)(t.card.createdAt)),1),e("h3",{class:"card__title",title:t.card.title},f(t.card.title),9,j),e("div",H,[(o(!0),i($,null,C(t.card.tags,n=>(o(),u(l,{key:n,tag:n},null,8,["tag"]))),128))])])]),_:1},8,["to"])}}}),O=g(M,[["__scopeId","data-v-895afc9d"]]),Q={class:"home"},W={class:"aside reverse"},Z={class:"aside__container"},tt={class:"main"},et={class:"actions"},st={class:"cards"},ot={__name:"index",async setup(d){let t,a;const l=D(),{data:c}=([t,a]=b(()=>T("/api/recipe","$PslAyef5YX")),t=await t,a(),t);let n=v(0);v("");const m=v(c);async function h(r){n.value=r.id;try{const s=await $fetch(`/api/filterRecipes?category=${r.value}`);m.value=s}catch(s){console.log(s)}}return(r,s)=>{const w=P,x=S,A=O;return o(),i("div",Q,[e("aside",W,[s[0]||(s[0]=e("h2",null,"Категории",-1)),e("div",Z,[(o(!0),i($,null,C(p(l).categories,_=>(o(),u(w,{category:_,class:y({"is-visible":_.id===p(n)}),onClick:nt=>h(_)},null,8,["category","class","onClick"]))),256))])]),e("div",tt,[s[3]||(s[3]=e("header",null,[e("h1",null,"Доска рецептов")],-1)),e("div",et,[F(x,{small:"",to:"/create",class:"actions__link"},{default:I(()=>s[1]||(s[1]=[N("+ Добавить рецепт")])),_:1}),s[2]||(s[2]=e("div",{class:"actions__search search"},null,-1))]),e("div",st,[(o(!0),i($,null,C(p(m),_=>(o(),u(A,{card:_,to:`/recipe/${_.id}`},null,8,["card","to"]))),256))])])])}}},mt=g(ot,[["__scopeId","data-v-4c5a1578"]]);export{mt as default};
