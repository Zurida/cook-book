{"version":3,"file":"index-CPVksHhF.js","sources":["../../../../components/collapse/Collapse.vue","../../../../assets/js/utils.js","../../../../pages/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\ntype TListItem = {\r\n    id: number,\r\n    name: string\r\n}\r\n\r\ntype TCategory = {\r\n    id: number,\r\n    text: string,\r\n    subcategories?: TListItem[]\r\n}\r\n\r\nlet currentId = ref(0);\r\n\r\nconst props = defineProps<{\r\n    category: TCategory,\r\n}>()\r\n\r\nconst emit = defineEmits<{\r\n    (e: 'click'): void\r\n}>()\r\n\r\nfunction setActiveId(id: number) {\r\n    currentId.value = id\r\n}\r\n</script>\r\n\r\n<template>\r\n    <div class=\"collapse\">\r\n        <div class=\"collapse__heading\" @click=\"emit('click')\">\r\n            <div class=\"collapse__title\">{{ category.text }}</div>\r\n            <!-- <span class=\"collapse__icon\"></span> -->\r\n        </div>\r\n\r\n        <div class=\"collapse__dropdown\">\r\n            <ul class=\"collapse__list\">\r\n                <CollapseItem v-for=\"item in category.subcategories\" :item=item\r\n                    :class=\"{ 'is-active': item.id === currentId }\" @click=\"setActiveId(item.id)\" />\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n.collapse {\r\n    width: 100%;\r\n\r\n    &.is-visible {\r\n        .collapse__dropdown {\r\n            grid-template-rows: 1fr;\r\n        }\r\n\r\n        .collapse__heading {\r\n            color: var(--main-3);\r\n        }\r\n    }\r\n\r\n    &__heading {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        padding: var(--gap) var(--gap) var(--gap-small) var(--gap);\r\n        font-size: 1.8rem;\r\n        font-weight: 700;\r\n        transition: color 0.4s;\r\n\r\n        &:hover {\r\n            cursor: pointer;\r\n            color: var(--main-3);\r\n        }\r\n    }\r\n\r\n    &__icon {\r\n        display: grid;\r\n        place-items: center;\r\n        width: 2.5rem;\r\n        height: 2.5rem;\r\n        line-height: 1;\r\n        text-align: center;\r\n        border-radius: 0.3rem;\r\n        background-color: var(--main-2);\r\n        transition: rotate 0.3s;\r\n    }\r\n\r\n    &__dropdown {\r\n        display: grid;\r\n        grid-template-rows: 0fr;\r\n        transition: grid-template-rows 0.4s;\r\n    }\r\n\r\n    &__list {\r\n        font-size: 1.6rem;\r\n        overflow: hidden;\r\n    }\r\n}\r\n</style>","export const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    return new Intl.DateTimeFormat('ru-RU', { dateStyle: 'long' }).format(date);\r\n}","<script setup>\r\n\r\n\r\nconst menu = useCategoryStore()\r\nconst { data: recipesGet } = await useFetch('/api/recipe')\r\n\r\nlet currentId = ref(0);\r\nconst searchVal = ref('')\r\nconst cards = ref(recipesGet)\r\n\r\n// watch(searchVal, () => {\r\n//   cards.value = recipesGet.value.filter(card => card.title.toLowerCase().includes(searchVal.value.toLowerCase()))\r\n// })\r\n\r\nasync function setActiveId(category) {\r\n  currentId.value = category.id\r\n\r\n  try {\r\n    const response = await $fetch(`/api/filterRecipes?category=${category.value}`)\r\n\r\n    cards.value = response\r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<template>\r\n  <div class=\"home\">\r\n    <aside class=\"aside reverse\">\r\n      <h2>Категории</h2>\r\n      <div class=\"aside__container\">\r\n        <Collapse v-for=\"category in menu.categories\" :category=\"category\" :class=\"{\r\n          'is-visible': category.id === currentId\r\n        }\" @click=\"setActiveId(category)\" />\r\n      </div>\r\n    </aside>\r\n    <div class=\"main\">\r\n      <header>\r\n        <h1>Доска рецептов</h1>\r\n      </header>\r\n\r\n      <div class=\"actions\">\r\n        <CommonVButton small to=\"/create\" class=\"actions__link\">+ Добавить рецепт</CommonVButton>\r\n\r\n        <div class=\"actions__search search\">\r\n          <!-- <div class=\"search__field\">\r\n            <CommonVInput v-model=\"searchVal\" type=\"text\"></CommonVInput>\r\n          </div> -->\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"cards\">\r\n        <CommonCard v-for=\"card in cards\" :card=\"card\" :to=\"`/recipe/${card.id}`\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n\r\n<style scoped lang=\"scss\">\r\n.home {\r\n  display: flex;\r\n  min-height: 100vh;\r\n}\r\n\r\nheader {\r\n  margin-bottom: calc(var(--gap) / 2);\r\n}\r\n\r\nh1 {\r\n  font-size: 2.4rem;\r\n  font-weight: 600;\r\n  text-transform: uppercase;\r\n}\r\n\r\n.actions {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: var(--gap);\r\n\r\n  &__link {\r\n    font-size: 1.2rem;\r\n  }\r\n}\r\n\r\n.main {\r\n  flex: 1;\r\n  padding: var(--gap);\r\n  background-color: var(--white-soft);\r\n}\r\n\r\n.cards {\r\n  display: grid;\r\n  flex: 1;\r\n  gap: 1rem;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 0.5fr));\r\n}\r\n\r\n\r\n.aside {\r\n  width: 22rem;\r\n\r\n  h2 {\r\n    padding: var(--gap);\r\n    border-bottom: 1px solid gray;\r\n    font-size: 2.4rem;\r\n    font-weight: 600;\r\n    text-transform: uppercase;\r\n    color: var(--white-soft);\r\n  }\r\n}\r\n</style>"],"names":["_withAsyncContext"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYI,QAAA,YAAY,IAAI,CAAC;AAUrB,aAAS,YAAY,IAAY;AAC7B,gBAAU,QAAQ;AAAA,IACtB;;;;;;;;;;;;;;;;;;;;;;ACxBO,MAAM,aAAa,CAAC,eAAe;AACtC,QAAM,OAAO,IAAI,KAAK,UAAU;AAChC,SAAO,IAAI,KAAK,eAAe,SAAS,EAAE,WAAW,QAAQ,EAAE,OAAO,IAAI;AAC9E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA,UAAM,OAAO,iBAAkB;AAC/B,UAAM,EAAE,MAAM,WAAY,KAAS,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAA,SAAS,eAAa,aAAA,CAAA;AAEzD,QAAI,YAAY,IAAI,CAAC;AACH,QAAI,EAAE;AACxB,UAAM,QAAQ,IAAI,UAAU;AAM5B,mBAAe,YAAY,UAAU;AACnC,gBAAU,QAAQ,SAAS;AAE3B,UAAI;AACF,cAAM,WAAW,MAAM,OAAO,+BAA+B,SAAS,KAAK,EAAE;AAE7E,cAAM,QAAQ;AAAA,MACf,SAAQ,OAAO;AACd,gBAAQ,IAAI,KAAK;AAAA,MAClB;AAAA,IACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}