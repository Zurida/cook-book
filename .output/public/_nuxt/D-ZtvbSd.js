import{_ as w}from"./DlAUqK2U.js";import{o as u,c as d,t as g,m as O,h as z,n as x,p as E,u as q,r as y,a as n,q as o,F as B,s as D,v as A,x as G,y as V,z as H,A as j,B as R,C as F,D as J,E as K,G as Q,b as p,w as M,d as U,H as W,I as X}from"./Bdy9WIX3.js";import{_ as Y}from"./CYC2kq5I.js";import{_ as Z}from"./C1dx7Lj9.js";import{u as ee}from"./vsY5hp9Z.js";import"./C2Ei7JBT.js";import"./BurPQFkw.js";const te={class:"title"},oe={__name:"Title",props:{title:String},setup(m){return(s,i)=>(u(),d("h1",te,g(m.title),1))}},se=w(oe,[["__scopeId","data-v-16e0c253"]]),ne=(m,s,i)=>{if(!m)throw new Error("A target component has to be provided.");if(!s)throw new Error("A callback has to be provided.");const c=e=>{e.target===m.value||e.composedPath().includes(m.value)||e.target===i.value||e.composedPath().includes(i.value)||typeof s=="function"&&s()};O(()=>{window.addEventListener("click",c)}),z(()=>{window.removeEventListener("click",c)})},le=["aria-expanded"],ae={class:"selected-value"},ie=["onClick"],re=["id","value"],ue=["for"],de=x({__name:"VSelect",props:E({options:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(m){const s=q(m,"modelValue"),i=y(),c=y(),e=y(!1),l=y();function f(a){l.value=a.text,e.value=!1}return ne(i,()=>{e.value=!1},c),(a,_)=>(u(),d("div",{class:H(["VSelect",{active:o(e)}])},[n("button",{type:"button",ref_key:"excludeRef",ref:c,class:"select-button",role:"combobox","aria-label":"select button","aria-haspopup":"listbox","aria-expanded":o(e),"aria-controls":"select-dropdown",onClick:_[0]||(_[0]=v=>e.value=!o(e))},[n("span",ae,g(o(l)||"Выбрать"),1),_[2]||(_[2]=n("i",{class:"arrow right"},null,-1))],8,le),a.options?(u(),d("ul",{key:0,class:"select-dropdown",role:"listbox",id:"select-dropdown",ref_key:"componentRef",ref:i},[(u(!0),d(B,null,D(a.options,(v,$)=>(u(),d("li",{role:"option",onClick:b=>f(v)},[A(n("input",{type:"radio",id:`option-${v.value}-${$}`,value:v.value,"onUpdate:modelValue":_[1]||(_[1]=b=>s.value=b)},null,8,re),[[G,s.value]]),n("label",{for:`option-${v.value}-${$}`},g(v.text),9,ue)],8,ie))),256))],512)):V("",!0)],2))}}),me={class:"VInput"},ce=["type"],pe={key:0,class:"VInput__label"},_e={key:1,class:"VInput__error"},ve=x({__name:"VInput",props:E({type:{}},{model:{},modelModifiers:{}}),emits:["update:model"],setup(m){const s=q(m,"model"),i=y(!1);function c(){typeof s.value=="string"&&(i.value=s.value.length<3),typeof s.value=="number"&&(i.value=s.value<1)}return(e,l)=>(u(),d("div",me,[A(n("input",R({class:["VInput__native",{"is-error":o(i)}],"onUpdate:modelValue":l[0]||(l[0]=f=>s.value=f)},e.$attrs,{type:e.type,onInput:c}),null,16,ce),[[j,s.value]]),e.$slots.label?(u(),d("label",pe,[F(e.$slots,"label",{},void 0)])):V("",!0),o(i)?(u(),d("p",_e,"Введите "+g(e.type==="number"?"число":"не менее 3 символов"),1)):V("",!0)]))}}),fe=w(ve,[["__scopeId","data-v-7294c89d"]]),ye={class:"VTextarea"},ge=["value"],Ve={key:0,class:"VTextarea__label"},$e=x({inheritAttrs:!1,__name:"VTextarea",props:{modelValue:{type:String}},emits:["update:modelValue"],setup(m,{emit:s}){const i=s,c=e=>{i("update:modelValue",e.target.value)};return(e,l)=>(u(),d("div",ye,[n("textarea",R({class:"VTextarea__native"},e.$attrs,{class:{"has-label":e.$slots.label},value:m.modelValue,onInput:c}),null,16,ge),e.$slots.label?(u(),d("label",Ve,[F(e.$slots,"label",{},void 0)])):V("",!0)]))}}),be=w($e,[["__scopeId","data-v-c7530ae2"]]),he={class:"container"},Ce={class:"form__item"},xe={class:"form__item"},ke={class:"form__item ingridients"},we={key:0,class:"ingridients__list"},Ie={class:"ingridients__text"},Se={class:"ingridients__remove"},Te={class:"form__item"},Fe=x({__name:"create",async setup(m){let s,i;const{data:c}=([s,i]=J(()=>ee("/api/measures","$iyMDuBlEhi")),s=await s,i(),s),{categories:e}=K(),l=Q({category:"",title:"",ingridients:[],description:"",images:[]}),f=y(!0),a=y({name:"",quantity:0,measure:null});function _(){l.ingridients.push({...a.value}),v()}function v(){a.value.name="",a.value.quantity=0,a.value.measure=null}function $(h){l.ingridients.splice(h,1)}function b(){!a.value.name||!a.value.quantity||!a.value.measure?f.value=!0:f.value=!1}async function N(h){h.preventDefault();const t={...l};try{const C=await $fetch("/api/recipe",{method:"POST",body:t});X("/")}catch(C){console.log(C)}}return(h,t)=>{const C=se,I=de,k=fe,P=Y,S=Z,L=be;return u(),d("div",he,[p(C,{title:"Добавить рецепт",class:"create__title"}),n("form",{class:"form",onSubmit:W(N,["prevent"])},[n("div",Ce,[t[6]||(t[6]=n("h3",null,"Категория",-1)),p(I,{options:o(e),modelValue:o(l).category,"onUpdate:modelValue":t[0]||(t[0]=r=>o(l).category=r)},null,8,["options","modelValue"])]),n("div",xe,[t[7]||(t[7]=n("h3",null,"Заголовок",-1)),p(k,{modelValue:o(l).title,"onUpdate:modelValue":t[1]||(t[1]=r=>o(l).title=r),type:"text",placeholder:"Введите заголовок"},null,8,["modelValue"])]),n("div",ke,[t[8]||(t[8]=n("h3",null,"Инргидиенты",-1)),o(l).ingridients.length?(u(),d("div",we,[(u(!0),d(B,null,D(o(l).ingridients,(r,T)=>(u(),d("div",{class:"ingridients__item",key:`ingridient-${T}`},[n("p",Ie,g(r.name)+" - "+g(r.quantity)+" "+g(r.measure),1),n("span",Se,[p(P,{name:"close",onClick:Me=>$(T)},null,8,["onClick"])])]))),128))])):V("",!0),n("div",{class:"ingridients__fields",onChange:b},[p(k,{model:o(a).name,"onUpdate:model":t[2]||(t[2]=r=>o(a).name=r),type:"text",placeholder:"Введите ингридиент"},null,8,["model"]),p(k,{model:o(a).quantity,"onUpdate:model":t[3]||(t[3]=r=>o(a).quantity=r),type:"number",placeholder:"Введите количество"},null,8,["model"]),p(I,{options:o(c),modelValue:o(a).measure,"onUpdate:modelValue":t[4]||(t[4]=r=>o(a).measure=r),class:"ingridients__select"},null,8,["options","modelValue"])],32)]),p(S,{small:"",onClick:_,disabled:o(f)},{default:M(()=>t[9]||(t[9]=[U("Добавить Инргидиент")])),_:1},8,["disabled"]),n("div",Te,[t[10]||(t[10]=n("h3",null,"Способ приготовления",-1)),p(L,{placeholder:"Введите текст",id:"steps",modelValue:o(l).description,"onUpdate:modelValue":t[5]||(t[5]=r=>o(l).description=r)},null,8,["modelValue"])]),p(S,{small:"",type:"submit"},{default:M(()=>t[11]||(t[11]=[U("Сохранить")])),_:1})],32)])}}});export{Fe as default};
